{% extends 'dashboardLayaout/dashboardLayout.html.twig' %}

{% block body %}

    <!--start apartment-->
    <div class="col-sm-9 col-md-12">


        <div class="listing-detail">
            <div class="col-sm-12">
                <h1>Ajouter Quoiqui!</h1>
            </div>
        </div>
        &nbsp; <span id="result" class="rslt"style="color:red;">&nbsp;</span>
        {#<div  class="col-sm-8"id="resultSearch"></div>#}
        {{ form_start(form,{"attr":{'action': path('dashboard_ajout') }}) }}

        <div class="listing-detail">
            <div class="col-sm-2">

                www :
            </div>
            <div class="col-sm-8">

                <p>{{ form_widget(form.qouiqui.slug) }}</p>

            </div>
            <div class="col-sm-2">
                <input  type ="text" class="form-control" value="ween.tn"/>
            </div>

            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>nom</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.firstName, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>

                </div>
            </div>
            <div class="col-sm-6">
                <div class="listing-detail-text">

                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>nom secondaire</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.lastName, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>

            </div>

            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>adresse</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.address1, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>adresse 2</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.adress2, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Zip code</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.zipCode, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>web site</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>  {{ form_widget(form.qouiqui.website, {'attr' : {'class' : 'form-control'}}) }} </p>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Email</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.mail, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Categorie</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.category, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Sous Categorie</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.scategory, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Numero de Télephone</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.phone, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Télephone additionnelle</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.phone2, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>pays</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.pays, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>


            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Ville</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.ville, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="listing-detail-text">
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <h1>Picture</h1>
                    </div>
                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>{{ form_widget(form.qouiqui.image, {'attr' : {'class' : 'form-control'}}) }}</p>
                    </div>
                </div>
            </div>


            <!--prso info Form -->
            <!--===================================================-->

            <div class="panel-body">
                <div class="row">

                    <div style="width:100%;height:400px;" id="myMap"></div>
                    <br/>
                    <div>
                        {{ form_widget(form.qouiqui.geoLat, {'attr' : {'class' : 'form-control','id':'latitude'}}) }}
                        {{ form_widget(form.qouiqui.geoLong, {'attr' : {'class' : 'form-control','id':'longitude'}}) }}
                    </div>

                </div>

            </div>


            <!--===================================================-->
            <!--End prso info Form -->

            <div class="col-sm-6">
                <div class="listing-detail-text">

                    <div class="col-sm-6 col-xs-6 nopadding">
                        <p>
                            <button type="submit" class="btn btn-warning sendButton "> valider</button>
                        </p>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>
        </div>
        {{ form_end(form) }}

    </div>
    <br>
    <!-- end apartment-->

    <!-- start reviews section-->

    <!-- end reviews section-->




{% endblock %}
    {% block javascripts %}
        {{ parent() }}

        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyBTdMydc9PUE0gPkcgjRZXOuFPXc5BUSrg"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

        <script type="text/javascript">
            var map;
            var marker;
            var myLatlng = new google.maps.LatLng(36.679843, 10.207210);
            var geocoder = new google.maps.Geocoder();
            var infowindow = new google.maps.InfoWindow();
            function initialize() {
                var mapOptions = {
                    zoom: 7,
                    center: myLatlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                map = new google.maps.Map(document.getElementById("myMap"), mapOptions);

                marker = new google.maps.Marker({
                    map: map,
                    position: myLatlng,
                    draggable: true
                });

                geocoder.geocode({'latLng': myLatlng}, function (results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        if (results[0]) {
                            $('#address').val(results[0].formatted_address);
                            $('#latitude').val(marker.getPosition().lat());
                            $('#longitude').val(marker.getPosition().lng());
                            infowindow.setContent(results[0].formatted_address);
                            infowindow.open(map, marker);
                        }
                    }
                });


                google.maps.event.addListener(marker, 'dragend', function () {

                    geocoder.geocode({'latLng': marker.getPosition()}, function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (results[0]) {
                                $('#adminbundle_ngn_qouiqui_address1').val(results[0].formatted_address);
                                $('#adminbundle_ngn_qouiqui_geoLat').val(marker.getPosition().lat());
                                $('#adminbundle_ngn_qouiqui_geoLong').val(marker.getPosition().lng());
                                infowindow.setContent(results[0].formatted_address);
                                infowindow.open(map, marker);
                            }
                        }
                    });
                });

            }

            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
        <!--===================================================-->
        <!-- END OF CONTAINER -->


        <script>


            $("#blah").keyup(function () {
                // Code to do stuff immediately
                setTimeout(myFunction, 300);
            });


            $('.slug').on('keyup', function () {
                //$('#adminbundle_ngn_qouiqui_slug').keyup(function () {
                var slug = $('#adminbundle_ngn_qouiqui_slug').val();
                var minlength = 1;


                if (slug.length >= minlength) {
                    $.ajax({
                        url: '{{ path('dashboard_get_slug') }}',
                        data: '&slug=' + slug,
                        type: "POST",
                        success: function (data) {

                            $('#result').append(data);
//                            $('.sendButton').attr('disabled', true);

                        },

                    });

                }else{
                    $('#result').html("");
//                    $('.sendButton').attr('disabled', false);
                }

            });
        </script>
    {% endblock %}
