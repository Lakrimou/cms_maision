<!--Property Details Section-->

<section class="property-details" id="section-annonces" style="background-image:url(module/immobiliair/images/parallax/image-2.jpg);">
    <div class="col-md-12 proprety sectionannonce">
        <div class="row">
            <span class="pull-right margin-bott-40">
                    {% if connected %}
                        <button class="theme-btn btn-style-one"
                                data-toggle="modal"
                                data-target="#Ajouter_annonce">Ajouter une Annonce Immobilière</button>
                    {% endif %}
                    </span>
            <div class="sec-title">

                <h2 class="theme_color">Liste Des Annonce<strong> Immobilière</strong></h2>
                <div class="separator small-separator"></div>

            </div>

        </div>
        <style>
            .services-wrap {
                background: #FFF;
                padding: 0 30px 30px 20px;
                text-align: center;
                margin: 77.5px 55px 0 55px;
                border: 1px solid #e4e4e4;
                -webkit-transition: all 0.15s linear;
                -moz-transition: all 0.15s linear;
                -o-transition: all 0.15s linear;
                transition: all 0.15s linear;
            }

            .center-cropped {
                clear: both;
                width: 100%;
                height: 329px;
                overflow: hidden;
                background-position: center center;
                background-repeat: no-repeat;
                background-size: cover;
                margin: 0 auto;
                margin-top: -78px;
                border: 1px solid #aeaeae;
                margin-bottom: 10px;
            }

        </style>

        <div class='row'>
            {% for module in module %}

                <div class="col-md-4">
                    <div class="brdr bgc-fff pad-10 box-shad btm-mrg-20 property-listing" style="height:548px">
                        <div class="media">


                            {% set img = DirParcour( qouiqui.user.id,qouiqui.id,module.id) %}



                            {% for image in img %}

                                {% if loop.index == 1 %}

                                    <div class="center-cropped col-sm-4" style="background-image: url('{{ asset('uploads/image/') }}{{ qouiqui.user.id }}/{{ qouiqui.id }}/annonce/annonce{{ module.id }}/{{ image }}');">
                                    </div>


                                {% endif %}

                            {% endfor %}

                            {% if img is empty %}
                                <div class="center-cropped col-sm-4" style="background-image: url('{{ asset('asset-front/images/empty room.jpg') }}');">
                                </div>
                            {% endif %}

                            <div class="clearfix visible-sm"></div>

                            <div class="media-body fnt-smaller">
                                <a href="#" target="_parent"></a>

                                <h4 class="media-heading">
                                    <a data-toggle="modal" data-target="#annonce{{ loop.index }}">{{ module.titre|upper }} | À {{ module.statu |upper }}
                                        <small class="pull-right">{{ module.prix }} DT</small>
                                    </a></h4>
                                {% set equipemt = jsonDecod(module.equipment) %}
                                <ul class="list-inline mrg-0 btm-mrg-10 clr-535353">

                                    <li>{{ module.sallon }} sallon |</li>
                                    <li>champbre : 3</li>
                                    <li>{{ module.salleDeBain }} salle De Bain |</li>
                                    <li>{{ module.ascenseur }} ascenseur |</li>

                                    {% for e in equipemt %}
                                        <li>{{ e }} |</li>
                                    {% endfor %}
                                </ul>

                                <p class="hidden-xs">{{ module.details|slice(0, 120)|raw }} ...
                                    <a type="button" class="texte_mini" align="left" data-toggle="modal" data-target="#annonce{{ loop.index }}">
                                        Voir Plus
                                    </a>
                                </p>
                                <span class="fnt-smaller fnt-lighter fnt-arial">
                                   {{ module.adresse }}
                                </span>
                            </div>
                        </div>
                    </div><!-- End Listing-->
                </div>
            {% endfor %}
            <div class="particle elem1 anim-delay1"></div>
            <div class="particle elem6 anim-delay2"></div>
            <div class="particle elem3 anim-delay3"></div>
            <div class="particle elem7 anim-delay4"></div>
            <div class="particle elem2 anim-delay5"></div>
            <div class="particle elem4 anim-delay8"></div>
            <div class="particle elem5 anim-delay9"></div>
            <div class="particle elem8 anim-delay3"></div>
            <div class="particle elem9 anim-delay10"></div>
            <div class="particle elem8 anim-delay11"></div>
            <div class="particle elem6 anim-delay12"></div>
            <div class="particle elem1 anim-delay14"></div>
            <div class="particle elem13 anim-delay16"></div>
            <div class="particle elem17 anim-delay18"></div>
            <div class="particle elem2 anim-delay6"></div>
            <div class="particle elem16 anim-delay9"></div>
            <div class="particle elem8 anim-delay3"></div>
            <div class="particle elem9 anim-delay10"></div>
            <div class="particle elem18 anim-delay11"></div>
            <div class="particle elem11 anim-delay12"></div>
            <div class="particle elem12 anim-delay14"></div>
            <div class="particle elem13 anim-delay16"></div>
            <div class="particle elem14 anim-delay18"></div>
            <div class="particle elem15 anim-delay6"></div>
            <div class="particle elem16 anim-delay9"></div>
            <div class="particle elem17 anim-delay7"></div>
            <div class="particle elem18 anim-delay6"></div>
            <div class="particle elem19 anim-delay3"></div>
        </div>
    </div>


</section>


<style>
    .media-body {
        display: block;
    }

    .padd20 {
        padding: 20px;
    }

    @media (max-width: 991px) {
        .proprety {
            padding: 15px !important;
            background: rgba(255, 255, 255, 0.83);
        }
    }

    .proprety {
        z-index: 97;
        padding: 30px 134px;
        margin: 0px 0;
    }

    .prop-title {
        text-align: center;
        width: 100%;
        font-size: 30px;
        color: green;
    }
</style>

{% if connected %}
    <div id="Ajouter_annonce" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Ajouter une Annonce</h4>
                </div>
                <div class="modal-body row">
                    <form id="add_ann" name="adminbundle_immobiliair"
                          action="{{ path('immobiliair_new',{'qq_id': qouiqui.id }) }}" method="POST"
                          enctype="multipart/form-data">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label" for="time">Titre de votre annonce</label>
                                <input type="text" name="adminbundle_immobiliair[titre]" placeholder=""
                                       class="form-control">
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label" for="time">Réferance</label>
                                <input type="text" name="adminbundle_immobiliair[prefix]" placeholder="Exemple: Ref-1235" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">Cuisine equipee</label>
                                <select id="time" name="adminbundle_immobiliair[cuisineEquipee]"
                                        class="form-control">
                                    <option value="0">aucun</option>
                                    <option value="1">1 Cuisine equipee</option>
                                    <option value="2">2 Cuisine equipee</option>
                                    <option value="3">plus que deux Cuisine equipee</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">vendre ou a louer</label>
                                <select id="time" name="adminbundle_immobiliair[statu]"
                                        class="form-control">
                                    <option value="vendre">à vendre</option>
                                    <option value="louer">à louer</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">Sallon</label>
                                <select id="time" name="adminbundle_immobiliair[sallon]" class="form-control">
                                    <option value="0">aucun</option>
                                    <option value="1">1 Sallon</option>
                                    <option value="2">2 Sallon</option>
                                    <option value="3">plus que deux Sallon</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">Suits</label>
                                <select id="time" name="adminbundle_immobiliair[suits]" class="form-control">
                                    <option value="0">aucun</option>
                                    <option value="1">1 Suits</option>
                                    <option value="2">2 Suits</option>
                                    <option value="3">plus que deux Suits</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">Salle de bain</label>
                                <select id="time" name="adminbundle_immobiliair[salleDeBain]"
                                        class="form-control">
                                    <option value="0">aucun</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">plus que deux Salle de bain</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">Ascenseur</label>
                                <select id="time" name="adminbundle_immobiliair[ascenseur]"
                                        class="form-control">
                                    <option value="0">aucun</option>
                                    <option value="1">1 Ascenseur</option>
                                    <option value="2">2 Ascenseur</option>
                                    <option value="3">plus que deux Ascenseur</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">Equipment</label>

                                <select name="adminbundle_immobiliair[equipment][]" class="selectpicker"
                                        multiple>
                                    <option>Camera de surveillance</option>
                                    <option>Jardin</option>
                                    <option>Piscine</option>
                                    <option>Garage</option>
                                    <option>climatisation</option>
                                    <option>système de chauffage central</option>
                                    <option> système d'alarme</option>
                                </select>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label" for="time">prix</label>
                                <input type="text" name="adminbundle_immobiliair[prix]" placeholder="9999.9"
                                       class="form-control">
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label" for="time">Details</label>
                                <textarea name="adminbundle_immobiliair[details]" class="edit" cols="30"
                                          rows="10">Décrire votre propriété </textarea>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label" for="time">envoi des image</label>
                                <input type="file" name="image[]" multiple>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                    <button type="submit" class="btn btn-default " data-target="modifier"
                            data-selector="add_ann">enregistrer
                    </button>
                </div>
            </div>

        </div>
    </div>
{% endif %}
<!-- Modal -->

{% for module in module %}
    <!-- Modal{{ loop.index }} -->
    <div id="annonce{{ loop.index }}" class="modal fade modal-lg" role="dialog">
        <div class="modal-dialog modal-lg">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{ module.titre|upper }}</h4>

                </div>
                <div class="modal-body row">

                    <div class="col-md-12">


                        <div class="row">
                            {% set img = DirParcour( qouiqui.user.id,qouiqui.id,module.id) %}
                            <div class="col-md-6">
                                <div id="annonce-item-{{ loop.index }}" class="carousel slide" data-ride="carousel">

                                    <!-- Wrapper for slides -->
                                    <div class="carousel-inner" role="listbox">


                                        {% for image in img %}

                                        <div class="item {% if loop.index == 1 %}active"{% endif %}">
                                        <a class="lightbox-img" data-toggle="modal" data-target="#lightbox-img">
                                            <img src="{{ asset('uploads/image/') }}/{{ qouiqui.user.id }}/{{ qouiqui.id }}/annonce/annonce{{ module.id }}/{{ image }}" alt="...">
                                        </a>

                                    </div>

                                    {% endfor %}

                                    {% if img is empty %}
                                        <div class="item active">
                                            <img src="http://lorempixel.com/400/200/city" alt="...">
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- Controls -->
                                <a class="left carousel-control" href="#carousel-example-generic" role="button"
                                   data-slide="prev" data-id-carousel="#annonce-item-{{ loop.index }}">
                                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="right carousel-control" href="#carousel-example-generic" role="button"
                                   data-slide="next" data-id-carousel="#annonce-item-{{ loop.index }}">
                                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                                    <span class="sr-only">Suivant</span>
                                </a>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="border">
                                <h3 class="theme_color centered">{{ module.titre|upper }} - À {{ module.statu|upper }} </h3>
                                <h5 class="pull-right padd20">{{ module.prix }} DT</h5>
                                <h5 class="pull-left padd20">Réferance<br>{{ module.prefix }}</h5>
                                <section class="col-md-12">
                                    <p class="description theme_color" style="font-size: 23px">Spécification:</p>
                                    <ul class="list-inline mrg-0 btm-mrg-10 clr-535353">
                                        <li>{{ module.sallon }} sallon |</li>
                                        <li>champbre : 3</li>
                                        <li>{{ module.salleDeBain }} salle De Bain |</li>
                                        <li>{{ module.ascenseur }} ascenseur |</li>
                                        {% set equipemt = jsonDecod(module.equipment) %}
                                        {% for e in equipemt %}
                                            <li>{{ e }} |</li>
                                        {% endfor %}
                                    </ul>
                                </section>

                                <section class="col-md-12">
                                    <div class="description ">
                                        <p style="font-size: 23px" class="theme_color">Description :</p>
                                        <raw class="text_detail">
                                            {{ module.details|raw }}
                                        </raw>

                                    </div>

                                </section>
                                <div class="col-md-12 tag">
                                    <i class="fa fa-tags" aria-hidden="true"></i>
                                    {% set equipemt = jsonDecod(module.equipment) %}
                                    {% for e in equipemt %}
                                        {{ e }},
                                    {% endfor %}
                                </div>
                            </div>
                            {% if connected %}
                                <button type="button" class="btn btn-primary mag10 pull-right" data-toggle="modal" data-target="#modifier_annonce{{ loop.index }}">Gérer</button>
                            {% endif %}
                            {#<button type="button" class="btn btn-primary mag10 pull-right" data-toggle="modal" data-target="#modifier_annonce{{ loop.index }}">Modifier</button>#}
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary shake-little shake-constant shake-constant--hover" data-ref="{{ module.prefix }}" data-toggle="modal" data-target="#Demandervisite">Demander une Visite</button>
                        <button type="button" class="btn btn-primary shake-little shake-constant shake-constant--hover" data-toggle="modal" data-target="#Rappeler">Être Rappelé</button>
                        <button type="button" class="btn btn-default " data-dismiss="modal">Fermer</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

{% endfor %}
<div id="lightbox-img" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">

            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <img class="imageopen" src="this-img" alt="">

        </div>

    </div>
</div>

<style>
    .mag10 {
        margin: 10px;
    }

    .close {
        position: absolute;
        right: 10px;
        font-size: 21px;
        font-weight: 700;
        line-height: 1;
        color: #ffffff;
        opacity: 1;
    }

    .border {
        margin: 9px;
        display: table;
        border-style: outset;
    }

    .Specification li {

        font-size: 18px;
        padding-left: 20px;

    }

    .imageopen {
        width: 100%;
    }

    div#carousel-bounding-box {
        width: 70%;
        margin: 0 auto;
        left: 15%;
    }

    .text_detail p {
        left: 15px;
    }

    .description {
        margin-top: 5px;
        font-size: 18px;
    }

    .hide-bullets {
        list-style: none;
        margin-left: -40px;
        margin-top: 20px;
    }

    .thumbnail {
        padding: 0;
    }

    .carousel-inner > .item > img, .carousel-inner > .item > a > img {
        width: 100%;
    }
</style>

{% if connected %}
    {% for module in module %}
        <div id="modifier_annonce{{ loop.index }}" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Gérer l'Annonce</h4>
                    </div>
                    <div class="modal-body row">
                        <form id="modif_ann{{ loop.index }}" name="adminbundle_immobiliair"
                              action="{{ path('modifer_annonce',{'id': module.id }) }}" method="POST"
                              enctype="multipart/form-data">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label" for="time">Titre de votre annonce</label>
                                    <input type="text" value="{{ module.titre }}" name="adminbundle_immobiliair[titre]" placeholder=""
                                           class="form-control">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">Cuisine equipee</label>
                                    <select id="time" value="" name="adminbundle_immobiliair[cuisineEquipee]"
                                            class="form-control">
                                        <option value="0" {% if module.cuisineEquipee == 0 %} selected {% endif %}>aucun</option>
                                        <option value="1" {% if module.cuisineEquipee == 1 %} selected {% endif %}>1 Cuisine equipee</option>
                                        <option value="2" {% if module.cuisineEquipee == 2 %} selected {% endif %}>2 Cuisine equipee</option>
                                        <option value="3" {% if module.cuisineEquipee == 3 %} selected {% endif %}>plus que deux Cuisine equipee</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">vendre ou a louer</label>
                                    <select id="time" name="adminbundle_immobiliair[statu]"
                                            class="form-control">
                                        <option value="vendre" {% if module.statu == 'vendre' %} selected {% endif %}>à vendre</option>
                                        <option value="louer" {% if module.statu == 'louer' %} selected {% endif %}>à louer</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">Sallon</label>
                                    <select id="time" name="adminbundle_immobiliair[sallon]" class="form-control">
                                        <option value="0"{% if module.sallon == 0 %} selected {% endif %}>aucun</option>
                                        <option value="1" {% if module.sallon == 1 %} selected {% endif %}>1 Sallon</option>
                                        <option value="2" {% if module.sallon == 2 %} selected {% endif %}>2 Sallon</option>
                                        <option value="3" {% if module.sallon == 3 %} selected {% endif %}>plus que deux Sallon</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">Suits</label>
                                    <select id="time" name="adminbundle_immobiliair[suits]" class="form-control">
                                        <option value="0" {% if module.suits == 0 %} selected {% endif %}>aucun</option>
                                        <option value="1" {% if module.suits == 1 %} selected {% endif %}>1 Suits</option>
                                        <option value="2" {% if module.suits == 2 %} selected {% endif %}>2 Suits</option>
                                        <option value="3" {% if module.suits == 3 %} selected {% endif %}>plus que deux Suits</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">Salle de bain</label>
                                    <select id="time" name="adminbundle_immobiliair[salleDeBain]"
                                            class="form-control">
                                        <option value="0" {% if module.salleDeBain == 0 %} selected {% endif %}>aucun</option>
                                        <option value="1" {% if module.salleDeBain == 1 %} selected {% endif %}>1</option>
                                        <option value="2" {% if module.salleDeBain == 2 %} selected {% endif %}>2</option>
                                        <option value="3" {% if module.salleDeBain == 3 %} selected {% endif %}>plus que deux Salle de bain</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">Ascenseur</label>
                                    <select id="time" name="adminbundle_immobiliair[ascenseur]"
                                            class="form-control">
                                        <option value="0" {% if module.ascenseur == 0 %} selected {% endif %}>aucun</option>
                                        <option value="1" {% if module.ascenseur == 1 %} selected {% endif %}>1 Ascenseur</option>
                                        <option value="2" {% if module.ascenseur == 2 %} selected {% endif %}>2 Ascenseur</option>
                                        <option value="3" {% if module.ascenseur == 3 %} selected {% endif %}>plus que deux Ascenseur</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">Equipment</label>
                                    {% set equipemt = jsonDecod(module.equipment) %}

                                    <select name="adminbundle_immobiliair[equipment][]" class="selectpicker"
                                            multiple>
                                        <option {% if 'Camera de surveillance' in equipemt %}selected{% endif %}>Camera de surveillance</option>
                                        <option {% if 'Jardin' in equipemt %}selected{% endif %}>Jardin</option>
                                        <option {% if 'Piscine' in equipemt %}selected{% endif %}>Piscine</option>
                                        <option {% if 'Garage' in equipemt %}selected{% endif %}>Garage</option>
                                        <option {% if 'climatisation' in equipemt %}selected{% endif %}>climatisation</option>
                                        <option {% if 'système de chauffage central' in equipemt %}selected{% endif %}>système de chauffage central</option>
                                        <option {% if "système d'alarme in equipemt" %}selected{% endif %}>système d'alarme</option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" for="time">prix</label>
                                    <input type="text" name="adminbundle_immobiliair[prix]" value="{{ module.prix }}" placeholder="9999.9"
                                           class="form-control">
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label" for="time">Details</label>
                                    <textarea name="adminbundle_immobiliair[details]" class="edit" cols="30"
                                              rows="10">{{ module.details }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label" for="time">envoi des image</label>
                                    <input type="file" name="image[]" multiple>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger pull-left delet-annonce" data-dismiss="modal" data-link="{{ path('suppr_annonce',{'id': module.id}) }}">Effacer l'annonce !</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                        <button type="submit" class="btn btn-default " data-target="modifier"
                                data-selector="modif_ann{{ loop.index }}">enregistrer
                        </button>
                    </div>
                </div>

            </div>
        </div>
    {% endfor %}
    <form id="supp-ann" action="#link" method="POST">

    </form>
{% endif %}
<!-- Modal -->