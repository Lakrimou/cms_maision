{% extends 'back/layout_admin.html.twig' %}
{% block contant %}
    <!--Page content-->
    <!--===================================================-->
    <div id="page-content">

        <div id="page-content">


            <div class="row">
                <div class="col-lg-12">

                    <!--Network Line Chart-->
                    <!--===================================================-->

                    <!--===================================================-->
                    <!--End network line chart-->

                    <div class="col-lg-7"> <!--Realtime flot chart-->
                        <!--===================================================-->
                        <div class="panel">
                            <div class="panel-heading">
                                <div class="panel-control">
                                    <span class="label label-success">Online</span>
                                </div>
                                <h3 class="panel-title">Server Load</h3>
                            </div>
                            <div class="pad-all">
                                <ul class="list-inline mar-no text-right">
                                    <li>
                                        <div class="pad-hor">
                                            <span class="text-lg text-semibold text-main">40%</span>
                                            <p class="text-muted mar-no"><small>Avg. Server Load</small></p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="pad-hor">
                                            <span class="text-lg text-semibold text-main">24 Days</span>
                                            <p class="text-muted mar-no"><small>Up Time</small></p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="pad-hor">
                                            <span class="text-lg text-semibold text-main">00:05:23</span>
                                            <p class="text-muted mar-no"><small>Avg. Time on Site</small></p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div id="demo-realtime-chart" class="flot-full-content" style="padding: 0px; position: relative;">
                                <!--Flot chart placement-->
                                <canvas class="flot-base" width="640" height="120" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 640px; height: 120px;"></canvas><canvas class="flot-overlay" width="640" height="120" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 640px; height: 120px;"></canvas></div>
                        </div>
                    </div>
                    <div class="col-lg-5">

                        <!--Large weather widget-->
                        <!--===================================================-->
                        <div id="demo-weather-widget-lg" class="panel panel-info">
                            <div class="panel-body">
                                <div class="media pad-all bord-btm">
                                    <div class="media-left">
                                        <canvas id="demo-weather-lg-icon-1" width="64" height="64"></canvas>
                                    </div>
                                    <div class="media-body pad-lft">
                                        <h4 class="mar-no text-main">San Jose, CA</h4>
                                        <p>Today</p>
                                        <span class="text-sm text-muted">Real Feel 27°</span>
                                        <span class="text-sm text-muted mar-lft">Humidity 61%</span>
                                        <span class="text-sm text-muted mar-lft">Wind 10km/hours</span>
                                    </div>
                                </div>
                                <div class="row pad-top">
                                    <div class="col-md-4">
                                        <p class="text-3x mar-no">30°</p>
                                        Partly Cloudy Day
                                    </div>
                                    <div class="col-md-8">
                                        <div class="list-unstyled text-center clearfix">
                                            <div class="col-xs-3">
                                                <canvas id="demo-weather-lg-icon-2" width="32" height="32"></canvas>
                                                <p class="text-sm mar-no">Saturday</p>
                                                25 °C
                                            </div>
                                            <div class="col-xs-3">
                                                <canvas id="demo-weather-lg-icon-3" width="32" height="32"></canvas>
                                                <p class="text-sm mar-no">Sunday</p>
                                                22 °C
                                            </div>
                                            <div class="col-xs-3">
                                                <canvas id="demo-weather-lg-icon-4" width="32" height="32"></canvas>
                                                <p class="text-sm mar-no">Monday</p>
                                                20 °C
                                            </div>
                                            <div class="col-xs-3">
                                                <canvas id="demo-weather-lg-icon-5" width="32" height="32"></canvas>
                                                <p class="text-sm mar-no">Tuesday</p>
                                                28 °C
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--===================================================-->
                        <!--End Large weather widget-->
                    </div>



                </div>



            </div>


            <!-- Add Row -->
            <!--===================================================-->
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title">Add Row</h3>
                </div>

                <div class="panel-body">
                    <table id="demo-dt-addrow" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                        <tr>
                            <th>slug</th>
                            <th>nom</th>
                            <th class="min-tablet">address1</th>
                            <th class="min-tablet">website.</th>
                            <th class="min-desktop">email QQ</th>
                            <th class="min-desktop">nom d'utilisateur</th>
                            <th class="min-desktop">Module</th>
                            <th class="min-desktop">ACTION</th>
                            <th class="min-desktop">Module</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for q in qouiquis %}
                            <td data-ref="{{ q.id }}">
                                <td>{{ q.id }}</td>
                                <td>{{ q.firstName }}</td>
                                <td>{{ q.address1 }}</td>
                                <td>{{ q.website }}</td>
                                <td>{{ q.mail }}</td>
                                <td>{{ q.user.username }}</td>
                                <td>

                                    {% set ngn_id %}{% for ngn  in q.ngns %}{{ ngn.id }}{% endfor %}{% endset %}

                                    <a href="{{ path('qouiqui_edit',{id: ngn_id }) }}"><button class="btn btn-primary btn-xs" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button></a>
                                    <button class="btn btn-danger btn-xs DeleteQQ" data-link="{{ path('qouiqui_sup',{id: q.id } ) }}" data-id="{{ q.id }}" ><span class="glyphicon glyphicon-trash"></span></button>
                                    <a href="http://{{ q.slug }}.{{ app.request.server.get("SERVER_NAME") }}" ><button class="btn btn-primary btn-xs" data-title="ouvrir"><span class="glyphicon glyphicon-eye-open"></span></button></a>

                                </td>
                                <td>
                                    {% for ngn  in q.ngns %} {{ ngn.category.slug }} {% endfor %}

                                    {% set cat %}{% for ngn  in q.ngns %}{{ ngn.category.slug }}{% endfor %}{% endset %}

                                    {% set ismodule %}
                                        {% for ngn  in q.ngns %} {{ ngn.category.isModule }} {% endfor %}
                                    {% endset %}

                                    {% if ismodule.__toString > 0 %}
                                        <a href="{{ path('immobiliair_index',{category: cat , qq: q.id }) }}" ><button class="btn btn-primary btn-xs" data-title="ouvrir"><span class="glyphicon glyphicon-eye-open"></span></button> Ouvrir la liste</a>
                                    {% else %}
                                        ce module en cours de développement
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <!--===================================================-->
            <!-- End Add Row -->



        </div>





        <script>
            $(document).ready(function() {
                $('#demo-dt-addrow').DataTable({
                    responsive: true
                });

            } );
        </script>
        <script>

            $( ".DeleteQQ" ).click(function() {
                id = $(this).attr('data-id');

                link = $(this).attr('data-link');



                var data = {
                    id:id,
                };

                $.ajax({
                    type: "POST",
                    url: link,
                    data: data,
                    success: function(){
                        $("tr[data-ref="+id+"]").fadeOut();
                    }
                });

            });







        </script>

    </div>
    <!--===================================================-->
    <!--End page content-->
{% endblock %}
